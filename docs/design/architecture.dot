digraph {


        /* Source systems */
        subgraph cluster_top {
                label = "Sources";

                source1t [shape=ellipse, label="NetSuite"];
                source2t [shape=ellipse, label="AnchorAPI"];
                source3t [shape=ellipse, label="ASIO"];
                source4t [shape=ellipse, label="Doge"];
                source5t [shape=ellipse, label="Russian Mafia"];
        }

        /* Get */
        doc1in [shape=note];
        doc2in [shape=note];
        doc3in [shape=note];
        doc4in [shape=note];
        doc4in [shape=note];

        source1t -> doc1in;
        source2t -> doc2in;
        source3t -> doc3in;
        source4t -> doc4in;
        source5t -> doc5in;

        /* Diff */
        initial [shape=note, label="Previous"];

        compare1 [shape=invtrapezium, label="Diff"];
        compare2 [shape=invtrapezium, label="Diff"];
        compare3 [shape=invtrapezium, label="Diff"];
        compare4 [shape=invtrapezium, label="Diff"];
        compare5 [shape=invtrapezium, label="Diff"];

        diff1 [shape=rectangle];
        diff2 [shape=rectangle];
        diff3 [shape=rectangle];
        diff4 [shape=rectangle];
        diff5 [shape=rectangle];

        {doc1in initial} -> compare1 -> diff1;
        {doc2in initial} -> compare2 -> diff2;
        {doc3in initial} -> compare3 -> diff3;
        {doc4in initial} -> compare4 -> diff4;
        {doc5in initial} -> compare5 -> diff5;

        /* Merge */
        merge [shape=invtrapezium];

        {diff1 diff2 diff3 diff4 diff5} -> merge -> diff;

        /* Apply */
        apply1 [label="Patch"];
        apply2 [label="Patch"];
        apply3 [label="Patch"];
        apply4 [label="Patch"];
        apply5 [label="Patch"];

        {doc1in diff} -> apply1 -> doc1out;
        {doc2in diff} -> apply2 -> doc2out;
        {doc3in diff} -> apply3 -> doc3out;
        {doc4in diff} -> apply4 -> doc4out;
        {doc5in diff} -> apply5 -> doc5out;

        /* Put */
        doc1out [shape=note];
        doc2out [shape=note];
        doc3out [shape=note];
        doc4out [shape=note];
        doc4out [shape=note];

        doc1out -> source1b;
        doc2out -> source2b;
        doc3out -> source3b;
        doc4out -> source4b;
        doc5out -> source5b;

        /* Sink systems */
        subgraph cluster_bottom {
                label = "Sources";
                source1b [shape=ellipse, label="NetSuite"];
                source2b [shape=ellipse, label="AnchorAPI"];
                source3b [shape=ellipse, label="ASIO"];
                source4b [shape=ellipse, label="Doge"];
                source5b [shape=ellipse, label="Russian Mafia"];
        }
}
